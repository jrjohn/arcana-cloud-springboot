# API Test Report - k8s-grpc Mode

**Generated:** 2025-11-26 12:02:10
**Base URL:** http://localhost:30080
**Mode:** k8s-grpc

## Summary

| Metric | Value |
|--------|-------|
| Total Tests | 14 |
| Passed | 11 |
| Failed | 3 |
| Pass Rate | 78.6% |

## Test Results

| Test Name | Method | Endpoint | Status | Expected | Actual | Duration |
|-----------|--------|----------|--------|----------|--------|----------|
| Health Check | GET | /actuator/health | ✅ PASS | 200 | 200 | 10.31ms |
| Register New User | POST | /api/v1/auth/register | ✅ PASS | 201 | 201 | 70.37ms |
| Admin Login | POST | /api/v1/auth/login | ✅ PASS | 200 | 200 | 70.25ms |
| User Login | POST | /api/v1/auth/login | ✅ PASS | 200 | 200 | 70.03ms |
| Invalid Login (should fail) | POST | /api/v1/auth/login | ✅ PASS | 401 | 401 | 11.23ms |
| Refresh Token | POST | /api/v1/auth/refresh | ❌ FAIL | 200 | 500 | 13.59ms |
| Get Current User Profile | GET | /api/v1/me | ❌ FAIL | 200 | 500 | 13.68ms |
| Get All Users (Admin) | GET | /api/v1/users | ✅ PASS | 200 | 200 | 14.17ms |
| Get User By ID (Admin) | GET | /api/v1/users/19 | ❌ FAIL | 200 | 500 | 15.2ms |
| Create User (Admin) | POST | /api/v1/users | ✅ PASS | 201 | 201 | 73.33ms |
| Update User (Admin) | PUT | /api/v1/users/20 | ✅ PASS | 200 | 200 | 14.31ms |
| Delete User (Admin) | DELETE | /api/v1/users/20 | ✅ PASS | 200 | 200 | 14.5ms |
| Get Users Without Auth (should fail) | GET | /api/v1/users | ✅ PASS | 403 | 403 | 10.17ms |
| Logout | POST | /api/v1/auth/logout | ✅ PASS | 200 | 200 | 14.5ms |

## API Endpoints Tested

### Authentication APIs
- `POST /api/v1/auth/register` - Register new user
- `POST /api/v1/auth/login` - User login
- `POST /api/v1/auth/refresh` - Refresh access token
- `POST /api/v1/auth/logout` - Logout

### User Management APIs
- `GET /api/v1/users` - Get all users (Admin)
- `GET /api/v1/users/{id}` - Get user by ID
- `POST /api/v1/users` - Create user (Admin)
- `PUT /api/v1/users/{id}` - Update user
- `DELETE /api/v1/users/{id}` - Delete user (Admin)

### Current User APIs
- `GET /api/v1/me` - Get current user profile

### Health Check
- `GET /actuator/health` - Service health status

---
*Report generated by Arcana Cloud API Test Suite*
