# Arcana Cloud - Base Configuration
# This file is loaded by Spring Cloud Config Server

# Application
spring:
  application:
    name: arcana-cloud-java

# Deployment Configuration
deployment:
  mode: monolithic

communication:
  protocol: rest

# Database
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/arcana_cloud
    username: arcana
    # Password should be encrypted or loaded from secrets
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      connection-timeout: 30000

# JPA
  jpa:
    hibernate:
      ddl-auto: none
    show-sql: false

# Redis
  data:
    redis:
      host: localhost
      port: 6379
      timeout: 2000ms

# Cache TTL
  cache:
    redis:
      default-ttl-minutes: 10
      users-ttl-minutes: 5
      tokens-ttl-minutes: 60

# JWT (should be loaded from secrets in production)
jwt:
  expiration: 3600000
  refresh:
    expiration: 2592000000

# gRPC
spring:
  grpc:
    server:
      port: 9090

service:
  grpc:
    url: localhost:9090
  rest:
    url: http://localhost:8081

repository:
  grpc:
    url: localhost:9091
  rest:
    url: http://localhost:8082

# Circuit Breaker
circuit-breaker:
  failure-rate-threshold: 50
  slow-call-rate-threshold: 80
  slow-call-duration-threshold-ms: 5000
  wait-duration-in-open-state-ms: 30000
  permitted-calls-in-half-open-state: 5
  sliding-window-size: 10
  minimum-number-of-calls: 5

# Plugin Security
arcana:
  plugin:
    security:
      enabled: true
      require-signed-plugins: false
      audit-enabled: true
      trusted-certificates-path: config/plugin-certs

# Logging
logging:
  level:
    root: INFO
    com.arcana.cloud: DEBUG
